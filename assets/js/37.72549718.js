(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{226:function(a,s,e){"use strict";e.r(s);var t=e(1),n=Object(t.a)({},function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm","aria-hidden":"true"}},[a._v("#")]),a._v(" Npm")]),a._v(" "),e("table",[e("thead",[e("tr",[e("th",[a._v("更新时间")]),a._v(" "),e("th",[a._v("操作类别")]),a._v(" "),e("th",[a._v("操作人")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[a._v("2020-07-28")]),a._v(" "),e("td",[a._v("初始化项目")]),a._v(" "),e("td",[a._v("王志伟")])])])]),a._v(" "),e("p",[a._v("作为一个前端，每个人应该对 npm install 这个命令应该非常熟悉了，尤其是对这个命令执行过程中命令窗口疯狂输出肯定印象深刻。我发现有的同学对安装包轻车熟路，但对包从哪里来的以及如何发布一个 npm 并不是很了解，因此做了如下总结，希望能对大家有所帮助。")]),a._v(" "),e("p",[a._v("由于发布包涉及到发布、安装、更新、删除/废弃等阶段，首先介绍一下 npm 相关的一些知识。")]),a._v(" "),e("h2",{attrs:{id:"_1-npm（node-package-manager）介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-npm（node-package-manager）介绍","aria-hidden":"true"}},[a._v("#")]),a._v(" 1.npm（node package manager）介绍")]),a._v(" "),e("ul",[e("li",[a._v("是一个辅助前端开发的包管理工具")]),a._v(" "),e("li",[a._v("包括\n"),e("ul",[e("li",[a._v("网站：找包、注册用户")]),a._v(" "),e("li",[a._v("命令行：程序员与 npm 交互的主要形式")]),a._v(" "),e("li",[a._v("仓库：最大的 JavaScript 软件库")])])]),a._v(" "),e("li",[a._v("管理对象：包（package）")]),a._v(" "),e("li",[a._v("管理方式：\n"),e("ul",[e("li",[a._v("增（发布：npm publish；安装：npm i）")]),a._v(" "),e("li",[a._v("删（废弃：npm deprecate；卸载：npm rm）")]),a._v(" "),e("li",[a._v("改（更新：npm up）")]),a._v(" "),e("li",[a._v("查（搜索：npm s）")])])])]),a._v(" "),e("p",[a._v("npm 中涉及到的主体主要有两个：package 和 module，定义如下：")]),a._v(" "),e("ul",[e("li",[a._v("package：含有 package.json 描述文件并发布到 npm 仓库的文件或者文件夹")]),a._v(" "),e("li",[a._v("module：在 node_modules 中，可以被 Node.js 的 require()方法加载的任何文件或文件夹")])]),a._v(" "),e("p",[a._v("可以这样理解：一个 JavaScript 软件，从本地发布到 npm 仓库时是 package，从 npm 仓库下载到本地时就变成了 module")]),a._v(" "),e("p",[a._v("另外，基于以上，可以看出 package 和 module 的关系：")]),a._v(" "),e("ul",[e("li",[a._v("module 不一定是 package（比如 node 内置模块），package 一定是 module")]),a._v(" "),e("li",[a._v("含 package.json 文件的 module 一定是 package")])]),a._v(" "),e("p",[a._v("除了以上概念外，再分别看下两个主体中的细节部分：")]),a._v(" "),e("h3",{attrs:{id:"package（包）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package（包）","aria-hidden":"true"}},[a._v("#")]),a._v(" package（包）")]),a._v(" "),e("p",[a._v("主要有两个重要的属性：\n1.Scope（作用域，范围）")]),a._v(" "),e("p",[a._v("一旦注册个人或者团体账户，就获得了与个人或者团体名相匹配的 scope，可以用这个 scope 作为包的命名空间，例如@yuyy、@58。")]),a._v(" "),e("p",[a._v("分类：")]),a._v(" "),e("ul",[e("li",[a._v("unscoped：例如 babel")]),a._v(" "),e("li",[a._v("scoped\n"),e("ul",[e("li",[a._v("user： 例如@yuyy/babel")]),a._v(" "),e("li",[a._v("org：@babel/parser")])])])]),a._v(" "),e("p",[a._v("作用：为你自己发布的包提供命名空间，防止与他人的包名冲突\n2.Accessibility（可访问性）")]),a._v(" "),e("p",[a._v("属性值有：")]),a._v(" "),e("ul",[e("li",[a._v("private：私有，仅作者本人或团队成员可见")]),a._v(" "),e("li",[a._v("public：公有，所有人可见")])]),a._v(" "),e("p",[a._v("此属性和 github 创建仓库时设定访问性的策略一致：公有，所有人可见，免费；私有，仅自己可见，收费。")]),a._v(" "),e("p",[a._v("需要说明的几点：")]),a._v(" "),e("ul",[e("li",[a._v("个人账户（User）可以创建和管理 Unscoped 的 package；团队账户（Org）相互只能管理 Scoped 的 package")]),a._v(" "),e("li",[a._v("Unscoped 总是 public")]),a._v(" "),e("li",[a._v("Private 的 package 总是 Scoped")]),a._v(" "),e("li",[a._v("Scoped 的 package 默认 Private，但需要付费，可以通过命令行改变其属性")])]),a._v(" "),e("h2",{attrs:{id:"module（模块）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#module（模块）","aria-hidden":"true"}},[a._v("#")]),a._v(" module（模块）")]),a._v(" "),e("p",[a._v("下载到本地的 module 主要是用于在 node 环境被引用，为了能被 Node.js 的 require()方法加载，module 必须是下列情况之一：")]),a._v(" "),e("ul",[e("li",[a._v("包含 package.json，且 package.json 中有 main 字段的文件夹")]),a._v(" "),e("li",[a._v("含有 index.js 的文件夹")]),a._v(" "),e("li",[a._v("JavaScript 文件")])]),a._v(" "),e("h2",{attrs:{id:"_2-发布-npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-发布-npm","aria-hidden":"true"}},[a._v("#")]),a._v(" 2.发布 Npm")]),a._v(" "),e("h3",{attrs:{id:"进入要发布的项目根目录，初始化为-npm-包："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入要发布的项目根目录，初始化为-npm-包：","aria-hidden":"true"}},[a._v("#")]),a._v(" 进入要发布的项目根目录，初始化为 npm 包：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" init\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/img/npm-init.png",alt:"npm init"}})]),a._v(" "),e("p",[a._v("依次按提示填入包名、版本、描述、github 地址、关键字、license 等")]),a._v(" "),e("h3",{attrs:{id:"注册-npm-账号"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注册-npm-账号","aria-hidden":"true"}},[a._v("#")]),a._v(" 注册 Npm 账号")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" adduser\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/img/npm-addUser.png",alt:"npm init"}})]),a._v(" "),e("h3",{attrs:{id:"登陆-npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#登陆-npm","aria-hidden":"true"}},[a._v("#")]),a._v(" 登陆 Npm")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" login\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/img/npm-login.png",alt:"npm登陆"}})]),a._v(" "),e("h3",{attrs:{id:"发布包，上传到-npm-包服务器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#发布包，上传到-npm-包服务器","aria-hidden":"true"}},[a._v("#")]),a._v(" 发布包，上传到 npm 包服务器")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" publish\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("更新包的同时记得要修改 "),e("code",[a._v("package.json")]),a._v(" 文件中的 "),e("code",[a._v("version")])]),a._v(" "),e("h3",{attrs:{id:"全局安装-nrm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全局安装-nrm","aria-hidden":"true"}},[a._v("#")]),a._v(" 全局安装 nrm")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i nrm -g\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("nrm 是 npm 仓库管理工具，可用于 npm 仓库的快速切换\n常用指令")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("nrm // 展示nrm可用命令\nnrm "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" // 列出已配置的所有仓库\nnrm "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" // 测试所有仓库的相应时间\nnrm "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("registry"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("url"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" //新增仓库\nnrm use "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("registry"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" //切换仓库\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("h2",{attrs:{id:"_3-安装和加载原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装和加载原理","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.安装和加载原理")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" npm可以搜到的包的名称\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用")]),a._v(" "),e("p",[a._v("通过 import 引入 module 中的插件 ，在项目进行中 （简化）")]),a._v(" "),e("h2",{attrs:{id:"_4-迭代"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-迭代","aria-hidden":"true"}},[a._v("#")]),a._v(" 4.迭代")]),a._v(" "),e("p",[a._v("一个 npm 包发布之后，我们难免会修改一些 bug，或者增改一些功能，这就涉及到对 npm 包的迭代。本篇文章就 npm 迭代涉及到一些知识点进行介绍。")]),a._v(" "),e("p",[a._v("npm 包的每次迭代都要涉及到两个方面：")]),a._v(" "),e("ul",[e("li",[a._v("内容的变更")]),a._v(" "),e("li",[a._v("版本的变更")])]),a._v(" "),e("p",[e("img",{attrs:{src:"/img/npm-rule.png",alt:"版本更新规范"}})]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" view zhiwei-model versions // 查看历史版本\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/img/npm-versions.png",alt:"版本查看"}})]),a._v(" "),e("h2",{attrs:{id:"_5-废弃-废弃"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-废弃-废弃","aria-hidden":"true"}},[a._v("#")]),a._v(" 5.废弃/废弃")]),a._v(" "),e("h3",{attrs:{id:"废弃"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#废弃","aria-hidden":"true"}},[a._v("#")]),a._v(" 废弃")]),a._v(" "),e("p",[a._v("npm 包发布后可以对包进行废弃或删除操作，废弃和删除的区别在于：")]),a._v(" "),e("ul",[e("li",[a._v("废弃不会将包或版本从 npm 仓库删除，仍然可以继续下载安装，并在安装的时候会有警示")]),a._v(" "),e("li",[a._v("删除会将包从 npm 彻底删除，无法被下载安装")])]),a._v(" "),e("p",[a._v("无论是废弃还是删除，都包含两个层面：")]),a._v(" "),e("ul",[e("li",[a._v("版本的废弃/删除")]),a._v(" "),e("li",[a._v("包的废弃/删除")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" deprecate "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pkg"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("@"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("version"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("message"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h3",{attrs:{id:"删除"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除","aria-hidden":"true"}},[a._v("#")]),a._v(" 删除")]),a._v(" "),e("p",[a._v("npm 不鼓励任何形式的删除，主要因为我们发布的包可能已经被其他人引用，如果我们删除了此包，其他人在重新安装含有我们包的依赖的工程时，出现找不到包问题。")]),a._v(" "),e("p",[a._v("基于此，npm 做了相关的删除限制：")]),a._v(" "),e("ul",[e("li",[a._v("删除的版本 24 小时后方可重发!")]),a._v(" "),e("li",[a._v("只有发布 72 小时之内的包可以删除!")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" unpublish "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pkg"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])])])},[],!1,null,null,null);s.default=n.exports}}]);